# Решение для интернет-магазина «В один клик»

## Описание проекта
Интернет-магазин «В один клик» столкнулся со снижением покупательской активности постоянных клиентов. Привлечение новых пользователей перестало быть эффективным, поэтому ключевой задачей стало удержание и повторная активация уже существующей клиентской базы.

В рамках проекта было разработано решение, направленное на прогнозирование вероятности снижения покупательской активности клиентов в ближайшие три месяца и последующую сегментацию покупателей для формирования персонализированных предложений.

---

## Цель проекта
Построить модель машинного обучения, которая:
- предсказывает вероятность снижения покупательской активности клиента;
- позволяет выделить группы клиентов с разным уровнем риска и прибыльности;
- служит основой для разработки персонализированных маркетинговых стратегий.

Тип задачи: **бинарная классификация**  
Целевая метрика: **ROC-AUC**

---

## Данные
В проекте использовались несколько источников данных:

### market_file.csv
Данные о поведении клиента:
- коммуникации с маркетингом;
- покупательское и продуктовое поведение;
- активность на сайте;
- технические показатели.

Целевой признак:
- **Покупательская активность**: «снизилась» / «прежний уровень».

### market_money.csv
Данные о выручке клиента по периодам.

### market_time.csv
Данные о времени, проведённом клиентом на сайте.

### money.csv
Среднемесячная прибыль магазина от клиента за последние 3 месяца.

---

## Этапы работы
1. Загрузка данных  
2. Предобработка данных  
3. Исследовательский анализ данных  
4. Объединение таблиц  
5. Корреляционный анализ  
6. Использование пайплайнов  
7. Анализ важности признаков  
8. Сегментация покупателей  
9. Формирование выводов и рекомендаций  

---

## Предобработка данных
- Проверка типов данных и пропусков
- Разделение признаков на количественные и категориальные
- Удаление признаков с высокой корреляцией
- Кодирование категориальных признаков
- Масштабирование числовых признаков
- Использование `ColumnTransformer` и `Pipeline` для корректной подготовки данных

---

## Используемые модели
В рамках проекта были обучены и сравнены следующие модели:
- `KNeighborsClassifier`
- `DecisionTreeClassifier`
- `LogisticRegression`
- `SVC`

Для всех моделей подбирались гиперпараметры с помощью `GridSearchCV`.

---

## Результаты моделирования

| Модель | ROC-AUC (CV) | Лучшие параметры |
|------|-------------|------------------|
| KNeighborsClassifier | **0.904** | n_neighbors=9, weights='distance' |
| SVC | 0.900 | C=2, kernel='rbf' |
| LogisticRegression | 0.896 | C=1.0, penalty='l2' |
| DecisionTreeClassifier | 0.867 | max_depth=5, min_samples_split=10 |

**Лучшая модель:** `KNeighborsClassifier`  
Модель показала высокое качество и эффективно различает клиентов с риском снижения активности.

---

## Анализ важности признаков
С помощью метода permutation importance выявлены ключевые факторы, влияющие на снижение активности:
- текущая выручка клиента;
- количество неоплаченных товаров в корзине;
- показатели вовлечённости (время на сайте, страницы за визит);
- сервисные ошибки;
- интенсивность маркетинговых коммуникаций.

Менее значимыми оказались признаки, связанные с акционными покупками.

---

## Сегментация покупателей
На основе вероятности снижения активности и прибыльности клиенты были разделены на **9 сегментов**.

Наибольший интерес представляет сегмент:
**«Высокая прибыльность × Высокий риск»**  
В него вошли 48 клиентов.

Характерные особенности сегмента:
- высокая выручка при снижении вовлечённости;
- частые брошенные корзины;
- чувствительность к качеству сервиса и маркетинговой нагрузке.

---

## Рекомендации
Для клиентов из приоритетного сегмента предложены следующие меры:
- персонализированные акции на основе истории покупок;
- напоминания о брошенных корзинах с бонусами;
- сокращение массовых рассылок в пользу таргетированных предложений;
- повышение стабильности сайта и качества сервиса;
- развитие программ лояльности для премиум-клиентов.

---

## Итог
В ходе проекта была построена модель прогнозирования снижения покупательской активности с высоким качеством (**ROC-AUC = 0.904**), выявлены ключевые поведенческие и финансовые факторы риска, а также разработаны практические рекомендации по удержанию наиболее ценных клиентов.

Результаты проекта могут быть использованы для снижения оттока и роста долгосрочной выручки интернет-магазина.

